{% extends "fragments/layout" %}

{% block body %}

    {% if page is empty %}
    <div class="alert alert-info text-center">
        <i class="bi bi-info-circle"></i> No se han encontrado videojuegos
    </div>
    {% else %}
    <table class="table table-striped">
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Género</th>
            <th>Almacenamiento</th>
            <th>Fecha de creación</th>
            <th>Jugador</th>
            <th>Costo</th>
            <th>Datos</th>
        </tr>
        {% for videojuego in page.content %}
        <tr>
            <td>{{ videojuego.id }}</td>
            <td>{{ videojuego.nombre }}</td>
            <td>{{ videojuego.genero }}</td>
            <td>{{ videojuego.almacenamiento }}</td>
            <td>{{ videojuego.fechaDeCreacion }}</td>
            <td>{{ videojuego.jugador }}</td>
            <td>{{ videojuego.costo }}</td>
            <td>
                <a href="/admin/videojuegos/{{ videojuego.id }}">
                    <i class="bi bi-eye"></i>
                </a>

                <a href="/admin/videojuegos/{{ videojuego.id }}/edit">
                    <i class="bi bi-pencil"></i>
                </a>
                <a href="/admin/videojuegos/{{ videojuego.id }}/delete">
                    <i class="bi bi-trash"></i>
                </a>
            </td>
        </tr>
        {% endfor %}
    </table>

    {% if page.totalPages > 1 %}
    <nav class="mt-4">
        <div class="row aling-items-center">
            <div class="col-md-6">
                <p class="text-muted mb-0">
                    {% set endItem = (page.number + 1) * page.size %}
                    {% set finalEndItem = endItem > page.totalElements ? page.totalElements : endItem %}
                    Mostrando {{ (page.number * page.size) + 1 }} a {{ finalEndItem }} de {{ page.totalElements }} Videojuegos
                </p>
            </div>
            <div class="col-md-6">
                <ul class="pagination justify-content-end mb-0">
                    <!-- Página anterior -->
                    {% if page.hasPrevious %}
                    <li class="page-item">
                        <a class="page-link"
                           href="?page={{ page.number - 1 }}&size={{ page.size }}">
                            <i class="bi bi-chevron-left"></i> Anterior
                        </a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link"><i class="bi bi-chevron-left"></i> Anterior</span>
                    </li>
                    {% endif %}

                    <!-- Números de página -->
                    {% for i in range(0, page.totalPages - 1) %}
                    {% if i == page.number %}
                    <li class="page-item active">
                        <span class="page-link">{{ i + 1 }}</span>
                    </li>
                    {% elseif i >= (page.number - 2) and i <= (page.number + 2) %}
                    <li class="page-item">
                        <a class="page-link"
                           href="?page={{ i }}&size={{ page.size }}">{{ i + 1 }}</a>
                    </li>
                    {% endif %}
                    {% endfor %}

                    <!-- Página siguiente -->
                    {% if page.hasNext %}
                    <li class="page-item">
                        <a class="page-link"
                           href="?page={{ page.number + 1 }}&size={{ page.size }}">
                            Siguiente <i class="bi bi-chevron-right"></i>
                        </a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link">Siguiente <i
                                class="bi bi-chevron-right"></i></span>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    {% endif %}

    {% endif %}
{% endblock %}
